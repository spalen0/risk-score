# Rings Protocol

## Documentation & Resources

- [Documentation](https://docs.rings.xyz/)
- [Sonic blog](https://blog.soniclabs.com/rings-protocol-explained-scusd-and-sceth/)

## Protocol Analysis

Rings protocol is built on the Veda BoringVaults and its tokenomics are a fork of Thena's ve(3,3) model. It is using Veda BoringVaults on Ethereum and Sonic. Vaults on the Ethereum are deposit into strategies and revenue earned is bridged to Sonic. scUSD and scETH are direcitly bridged to Sonic. On Sonic, Rings protocol automatically sends the underlying ETH, BTC and Stablecoins to a Veda boring vault (on Ethereum mainnet) where it will be put to work in farming strategies using protocols like AAVE, Convex, Morpho, and assets like crvUSD, sDAI and more. All the yield generated by the mainnet Veda vault is swapped in ETH, BTC and stablecoins to mint new scETH, scBTC or scUSD that will be sent to Rings veNFT gauge system and distributed among Sonic dapps based on the gauge vote results every epoch.

### Collateral Vaults

Tokens scETH, scBTC and scUSD are collateral vaults.

### Staking Vaults

[Rings users can stake their scETH, scBTC or scUSD](https://docs.rings.money/overview/veda-vaults/staking-vault-sonic) to activate the native yield bearing properties of the assets, when staked the scETH, scBTC or scUSD are sent to a Veda boring vault (on Sonic this time), automating farming strategies, rebalancing assets, and redistributing yield to stakers.

## Contracts

### Mainnet

#### scUSD (Sonic USD)

- Mainnet address: [`0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE`](https://etherscan.io/address/0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE)
- RolesAuthority address: [`0x7D5f6108e23c0CB2cfD744E5c46f1aAfFc30A348`](https://etherscan.io/address/0x7D5f6108e23c0CB2cfD744E5c46f1aAfFc30A348#code)
- Owner of RolesAuthority is Timelock contract: [`0xFb6ec7CCBd77a42922a35D22A94fdF7fd54EE4BC`](https://etherscan.io/address/0xFb6ec7CCBd77a42922a35D22A94fdF7fd54EE4BC#code) with [1 day delay](https://etherscan.io/address/0xFb6ec7CCBd77a42922a35D22A94fdF7fd54EE4BC#readContract#F5)
- The same Auth has TellerWithMultiAssetSupport: [`0x358CFACf00d0B4634849821BB3d1965b472c776a`](https://etherscan.io/address/0x358CFACf00d0B4634849821BB3d1965b472c776a#readContract#F4)
- The same Auth has BoringOnChainQueue: [`0x3754480db8b3E607fbE125697EB496a44A1Be720`](https://etherscan.io/address/0x3754480db8b3E607fbE125697EB496a44A1Be720#readContract#F3)
- All crucial function updates are behind Timelock contract.

Potential problems:

- 3 Multisig contracts can manage vault position, depoly funds, by calling: `ManagerWithMerkleVerification.manageVaultWithMerkleVerification()`.
- 2 Multisig contracts can update exchange rate by calling: `AccountantWithFixedRate.updateExchangeRate()`.
- 2 Multisig contracts can pause vault by calling: `Pauser.pauseAll()`, `Pauser.pauseMultiple(address[])`, `Pauser.pauseSingle(address)`.
- There is only one Solver? EOA that can call solve on `BoringSolver` contract.

#### Authorities Table

| User Name | Target Name | Function Names | User Address | Target Address |
|-----------|-------------|----------------|--------------|----------------|
| Multisig 3/5 | ManagerWithMerkleVerification | manageVaultWithMerkleVerification(bytes32[][]) | 0x0792dCb7080466e4Bbc678Bdb873FE7D969832B8 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Teller | scUSD BoringVault | exit(address) | 0x358CFACf00d0B4634849821BB3d1965b472c776a | 0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE |
| BoringOnChainQueue | BoringSolver | boringSolve(address) | 0x3754480db8b3E607fbE125697EB496a44A1Be720 | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 |
| ManagerWithMerkleVerification | ManagerWithMerkleVerification | manageVaultWithMerkleVerification(bytes32[][]) | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| ManagerWithMerkleVerification | scUSD BoringVault | manage(address[]) | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 | 0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE |
| Multisig 2/3 | Teller | updateAssetData(address) | 0x7Ad69d482b56062b6e76D6e645FC5bFCB97C93b5 | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| Multisig 2/3 | BoringOnChainQueue | stopWithdrawsInAsset(address), cancelUserWithdraws (0x9fff7e2a) | 0x7Ad69d482b56062b6e76D6e645FC5bFCB97C93b5 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Multisig 2/3 | ManagerWithMerkleVerification | manageVaultWithMerkleVerification(bytes32[][]) | 0x7Ad69d482b56062b6e76D6e645FC5bFCB97C93b5 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Multisig 2/3 | Pauser | pauseAll(), pauseMultiple(address[]), pauseSingle(address) | 0x7Ad69d482b56062b6e76D6e645FC5bFCB97C93b5 | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 |
| Multisig 2/3 | AccountantWithFixedRate | updateExchangeRate(0x3458113d) | 0x7Ad69d482b56062b6e76D6e645FC5bFCB97C93b5 | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| Multisig 2/4 | Teller | updateAssetData(address) | 0x8D3e2ede20B3Bbe781C88Bdaf472E1e265f38Db8 | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| Multisig 2/4 | BoringOnChainQueue | stopWithdrawsInAsset(address), cancelUserWithdraws (0x9fff7e2a) | 0x8D3e2ede20B3Bbe781C88Bdaf472E1e265f38Db8 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Multisig 2/4 | ManagerWithMerkleVerification | manageVaultWithMerkleVerification(bytes32[][]) | 0x8D3e2ede20B3Bbe781C88Bdaf472E1e265f38Db8 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Multisig 2/4 | Pauser | pauseAll(), pauseMultiple(address[]), pauseSingle(address) | 0x8D3e2ede20B3Bbe781C88Bdaf472E1e265f38Db8 | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 |
| Multisig 2/4 | AccountantWithFixedRate | updateExchangeRate(0x3458113d) | 0x8D3e2ede20B3Bbe781C88Bdaf472E1e265f38Db8 | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| BoringSolver | Teller | bulkWithdraw(address) | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| BoringSolver | BoringOnChainQueue | solveOnChainWithdraws(0x412638dc) | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Timelock | Teller | setDelegate(address), setChainGasLimit(uint32) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| Timelock | BoringOnChainQueue | setAuthority(address), transferOwnership(address), rescueTokens(0x0bf6cab7) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Timelock | ManagerWithMerkleVerification | setAuthority(address), setManageRoot(address) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Timelock | AccountantWithFixedRate | updatePlatformFee(uint16), setRateProviderData(address) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| Timelock | BoringSolver | transferOwnership(address), setAuthority(address) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 |
| Timelock | scUSD BoringVault | setBeforeTransferHook(address), setAuthority(address), transferOwnership(address) | 0xfb6ec7ccbd77a42922a35d22a94fdf7fd54ee4bc | 0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE |
| Pauser | Teller | pause(), unpause() | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| Pauser | BoringOnChainQueue | unpause(), pause() | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Pauser | ManagerWithMerkleVerification | unpause(), pause() | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Pauser | AccountantWithFixedRate | unpause(), pause() | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| Multisig 4/6 | Pauser | unpauseAll(), unpauseMultiple(address[]), unpauseSingle(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0x7B49E2ceed55B33C382741eCdfe585878843c1f1 |
| EOA | BoringOnChainQueue | solveOnChainWithdraws (0x412638dc) | 0xD23086C4e450cAAF55704EbC03875A04B4716CA2 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| EOA | BoringSolver | boringRedeemMintSolve (0xff011b62), boringRedeemSolve (0xb7532db2) | 0xD23086C4e450cAAF55704EbC03875A04B4716CA2 | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 |

Removed authorities:

| User Name | Target Name | Function Names | User Address | Target Address |
|-----------|-------------|----------------|--------------|----------------|
| EOA | Teller | setDelegate(address), setChainGasLimit(uint32) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| EOA | BoringOnChainQueue | setAuthority(address), transferOwnership(address), rescueTokens(0x0bf6cab7), updateWithdrawAsset(address) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| EOA | ManagerWithMerkleVerification | setAuthority(address), setManageRoot(address) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| EOA | AccountantWithFixedRate | updatePlatformFee(uint16), setRateProviderData(address) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| EOA | BoringSolver | transferOwnership(address), setAuthority(address), boringRedeemMintSolve(0xff011b62), boringRedeemSolve(0xb7532db2) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 |
| EOA | scUSD BoringVault | setBeforeTransferHook(address), setAuthority(address), transferOwnership(address) | 0xf8553c8552f906C19286F21711721E206EE4909E | 0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE |
| Multisig 4/6 | Teller | setDelegate(address), setChainGasLimit(uint32) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0x358CFACf00d0B4634849821BB3d1965b472c776a |
| Multisig 4/6 | BoringOnChainQueue | setAuthority(address), transferOwnership(address), rescueTokens(0x0bf6cab7), updateWithdrawAsset(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0x3754480db8b3E607fbE125697EB496a44A1Be720 |
| Multisig 4/6 | ManagerWithMerkleVerification | setAuthority(address), setManageRoot(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0x76fda7A02B616070D3eC5902Fa3C5683AC3cB8B6 |
| Multisig 4/6 | AccountantWithFixedRate | updatePlatformFee(uint16), setRateProviderData(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0xA76E0F54918E39A63904b51F688513043242a0BE |
| Multisig 4/6 | BoringSolver | transferOwnership(address), setAuthority(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0xE41A255A37C7d5d30a2A20D58f4ecE149b346a61 |
| Multisig 4/6 | scUSD BoringVault | setBeforeTransferHook(address), setAuthority(address), transferOwnership(address) | 0xB77d74f032CfE55190325474E061052685CEccc0 | 0xd3DCe716f3eF535C5Ff8d041c1A41C3bd89b97aE |

Dune analytics to get roles for target address and function signature: https://dune.com/queries/4842970 & https://dune.com/queries/4843072

### scETH (Sonic ETH)

- Mainnet address: [`0x3bce5cb273f0f148010bbea2470e7b5df84c7812`](https://etherscan.io/address/0x3bce5cb273f0f148010bbea2470e7b5df84c7812)
- RolesAuthority address: [`0xA7F4Aec487ca3F3A9b5ADDC058daFD4644725902`](https://etherscan.io/address/0xA7F4Aec487ca3F3A9b5ADDC058daFD4644725902#code)
- Owner of RolesAuthority is Timelock contract: [`0x4D55C111058Df989dDA24c8A101F8Bd69b730a73`](https://etherscan.io/address/0x4D55C111058Df989dDA24c8A101F8Bd69b730a73#code) with [1 day delay](https://etherscan.io/address/0x4D55C111058Df989dDA24c8A101F8Bd69b730a73#readContract#F5)
- The same Auth has TellerWithMultiAssetSupport: [`0x358CFACf00d0B4634849821BB3d1965b472c776a`](https://etherscan.io/address/0x358CFACf00d0B4634849821BB3d1965b472c776a#readContract#F4)
- The same Auth has BoringOnChainQueue: [`0x3754480db8b3E607fbE125697EB496a44A1Be720`](https://etherscan.io/address/0x3754480db8b3E607fbE125697EB496a44A1Be720#readContract#F3)
- All crucial function updates are behind Timelock contract.
